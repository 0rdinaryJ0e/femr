@(currentUser: femr.business.dtos.CurrentUser, patient: femr.common.models.IPatient, viewModel: femr.ui.models.triage.CreateViewModelGet)

@import femr.ui.views.html.layouts.medicalPersonnel
@import femr.ui.controllers.routes.TriageController
@import femr.ui.views.html.helpers.triage._
    @additionalStyles = {
        <link rel="stylesheet" href="@routes.Assets.at("css/triage.css")">
        <link rel="stylesheet" href="@routes.Assets.at("css/datepicker.css")">
    }
    @additionalScripts = {
        <script type = "text/javascript" src="@routes.Assets.at("js/femr.js")"></script>
        <script type="text/javascript" src="@routes.Assets.at("js/triage/triage.js")"></script>
        <script type="text/javascript" src="@routes.Assets.at("js/triage/triageClientValidation.js")"></script>
        <script type="text/javascript" src="@routes.Assets.at("js/bootstrap-datepicker.js")"></script>
    }
    @searchById = {
    @helper.form(action = TriageController.createPopulatedGet()) {
        <div class="col-lg-10 col-sm-10 col-md-10 col-xs-10 remove-padding">
        @if(viewModel.isSearchError) {
            <input type="text" id="id" class="form-control idSearchForm" name="id" placeholder="Invalid Id">
        } else {
            <input type="text" id="id" class="form-control idSearchForm" name="id" placeholder="Id">
            }
        </div>
        <div class="col-lg-2 col-sm-2 col-md-2 col-xs-2 remove-padding">
            <button type="submit" class="buttonSearchForm idSearch btn btn-default btn-sm">Search</button>
        </div>
    }
    }
@medicalPersonnel("Triage", currentUser, styles = additionalStyles, scripts = additionalScripts, customSearch = searchById) {
    <div class="row">
        <div class="medicalHistoryLineDivide"></div>
        <div class ="well">
        @helper.form(action = TriageController.createPost(patient.getId)) {
            <div class="row triageInputRow">
                <div class="col-sm-6 col-xs-6">
                    <h3 class="pull-left bold margin-top-zero">General Info</h3>
                    <div class="medicalHistoryLineDivide"></div>
                    <div class="text-center">
                        @inputText("First Name:", "firstName",if (viewModel != null) viewModel.getFirstName else null)
                        @inputText("Last Name:", "lastName", if (viewModel != null) viewModel.getLastName else null)
                        @inputText("Address:", "address", if (viewModel != null) viewModel.getAddress else null)
                        @inputText("City:", "city", if (viewModel != null) viewModel.getCity else null)
                        @inputDate("Birth Date:", "age", if (viewModel != null) viewModel.getBirth else null)
                        @inputAge("Age:", "years", if (viewModel != null) viewModel.getAge else null)
                        <label class="inputLabel">Gender:</label>
                        <div class="btn-group pull-left" data-toggle="buttons">
                            @inputButton("Male", "sex", "maleBtn", if (viewModel !=null) viewModel.getSex == "" || viewModel.getSex == null else true, if (viewModel != null) viewModel.getSex == "Male" else false, "Male")
                            @inputButton("Female", "sex", "femaleBtn", if (viewModel !=null) viewModel.getSex == "" || viewModel.getSex == null else true, if (viewModel != null) viewModel.getSex == "Female" else false, "Female")
                        </div>


                        <div id="pregnantWrap" class="hidden">
                            <input type="text" class="hidden" id="boolPregnant" name="isPregnant">
                            <div class="btn-group pull-left" data-toggle="buttons">
                                <label class="inputLabel">Pregnant?</label>
                                <div class="btn-group pull-left" data-toggle="buttons">
                                    <label class="btn btn-default">
                                        <input type="radio" id="yesPregnantBtn">Yes
                                    </label>
                                    <label class="btn btn-default">
                                        <input type="radio" id="noPregnantBtn">No
                                    </label>
                                </div>
                            </div>
                            <div id="weeksWrap" class="hidden">
                                <label class="inputLabel">Weeks:</label>
                                <input type="text" class="form-control input-sm pull-left" name="weeksPregnant">
                            </div>
                        </div>


                    </div>
                </div>
                <div class="col-sm-6 col-xs-6">
                    <h3 class="pull-left bold margin-top-zero">Vitals</h3>
                    @*recycle sign?*@

                    <div class="medicalHistoryLineDivide"></div>
                    <div class="col-sm-6 col-xs-6 padding-right-zero padding-left-zero">
                        <div class="text-center">
                            <label class="inputLabel" id="bloodPressureInputLabelMargin" for="bloodPressureSystolic">
                                Blood Pressure:</label>
                            <div class="col-sm-6 col-md-6 col-xs-6">
                                <input type="number" step="number" min="0" class="form-control input-sm pull-left" id="bloodPressureSystolic" placeholder="Systolic" name="@viewModel.getVitalNames.get(7).getName"/>
                            </div>
                            <div class="col-sm-6 col-md-6 col-xs-6">
                                <input type="number" step="number" min="0" class="form-control input-sm pull-left" id="bloodPressureDiastolic" placeholder="Diastolic" name="@viewModel.getVitalNames.get(8).getName"/>
                            </div>
                            <label class="inputLabel" for="heartRate">Heart Rate (bpm):</label>
                            <input type="number" step="number" min="0" class="form-control input-sm pull-left" id="heartRate" name="@viewModel.getVitalNames.get(1).getName"/>
                            <label class="inputLabel" for="temperature">Temperature (F):</label>
                            <input type="number" step="any" min="0" class="form-control input-sm pull-left" id="temperature" name="@viewModel.getVitalNames.get(2).getName"/>
                            <label class="inputLabel" id="heightInputLabelMargin" for="heightFeet">Height:</label>
                            <div class="col-sm-6 col-md-6 col-xs-6">
                                <input type="number" step="number" min="0" class="form-control input-sm pull-left" id="heightFeet" placeholder="Feet" name="@viewModel.getVitalNames.get(4).getName"/>
                            </div>
                            <div class="col-sm-6 col-md-6 col-xs-6">
                                <input type="number" step="number" min="0" class="form-control input-sm pull-left" id="heightInches" placeholder="Inches" name="@viewModel.getVitalNames.get(5).getName"/>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6 col-xs-6 padding-right-zero padding-left-zero">
                        <div class="text-center">
                            <label class="inputLabel" for="respirations">Respirations (bpm):</label>
                            <input type="number" step="number" min="0" class="form-control input-sm pull-left" id="respirations" name="@viewModel.getVitalNames.get(0).getName"/>
                            <label class="inputLabel" for="oxygen">Oxygen Saturation (%):</label>
                            <input type="number" step="any" min="0" class="form-control input-sm pull-left" id="oxygen" name="@viewModel.getVitalNames.get(3).getName"/>
                            <label class="inputLabel" for="weight">Weight (lbs):</label>
                            <input type="number" step="any" min="0" class="form-control input-sm pull-left" id="weight" name="@viewModel.getVitalNames.get(6).getName"/>
                            <label class="inputLabel">BMI:</label>
                            <input type="text" id="bmi" class="form-control input-sm pull-left" disabled="true"/>
                        </div>
                    </div>
                    <label class="inputLabel" for="chiefComplaint">Chief Complaint:</label>
                    <textarea type="text" class="form-control input-lg" id="chiefComplaint" name="chiefComplaint" rows="3"></textarea>
                </div>
            </div>
            <div class="row">
                <button type="submit" id="triageSubmitBtn" class="btn btn-default pull-right">Submit Patient</button>
                <button type="button" class="newPatientBtn btn btn-default pull-right">Reset Fields</button>
            </div>
        </div>
    </div>
}
}

