@(currentUser: femr.common.dto.CurrentUser, viewModel: femr.ui.models.pharmacy.EditViewModelGet, searchError: java.lang.Boolean)

@import femr.ui.controllers.routes.PharmaciesController
@import femr.ui.views.html.layouts.main
@import femr.ui.views.html.partials.search
@import femr.ui.views.html.helpers.shared._

    @additionalScripts = {
        <script type = "text/javascript" src="@routes.Assets.at("js/pharmacy/pharmacy.js")"></script>
        <script type = "text/javascript" src="@routes.Assets.at("js/pharmacy/pharmacyClientValidation.js")"></script>
        <script type = "text/javascript" src="@routes.Assets.at("js/libraries/typeahead.min.js")"></script>
    }
    @additionalStyles = {
        <link rel="stylesheet" href="@routes.Assets.at("css/pharmacy.css")">
    }

@main("Pharmacy", currentUser, scripts = additionalScripts, styles = additionalStyles, search = search("pharmacy")) {
    <div id="pharmacyContentWrap">

        @patientOverview(viewModel.getPatient, viewModel.getPatientEncounterItem, "Pharmacy")



        <div id="mainWrap" class="backgroundForWrap">
        @helper.form(action = PharmaciesController.editPost(viewModel.getPatient.getId)) {


            <div id="diagnosisWrap">
                <ol class="problems">
                    <h4>List of Diagnoses</h4>
                    @if(viewModel.getProblems != null){
                        @for(y <- 1 to viewModel.getProblems.size) {
                            @if(viewModel.getProblems.get(y - 1) != null) {
                                <li>@viewModel.getProblems.get(y - 1).getName</li>
                            }
                        }
                    }
                </ol>
            </div>




            <div id="medicationWrap">
                <h4>Medications</h4>


                @for(x <- 1 to viewModel.getMedications.size) {
                    <div class="medication">
                        <input type="text" id="medication@x" class="fInput" name="prescription@x" value="@viewModel.getMedications.get(x - 1).getName" placeholder="Medication" readonly/>
                        <input type="text" class="hidden" name="id_prescription@x" value="@viewModel.getMedications.get(x - 1).getId"/>
                        <button type="button" class="fButton fOtherButton replaceBtn">Replace?</button>
                        <input type="text" class="hidden replacementMeds fInput" id="replacementMedication@x" name="replacementMedication@x" placeholder="Replacement" />
                    </div>
                }

            </div>
            <button type="submit" id="pharmacySubmitBtn" class="fButton fRedButton fSubmitButton pull-right">Submit</button>



        </div>


    </div>
}
}
